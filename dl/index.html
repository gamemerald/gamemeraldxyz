<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Downloading...</title>
  <script>
    window.onload = function () {
      const urlParams = new URLSearchParams(window.location.search);
      const file = urlParams.get('file');

      if (file) {
        // Basic filename validation
        if (/^[\w\-.\/]+$/.test(file)) {
          let downloadUrl = ''; // Use `let` so we can assign conditionally

          // Set download URL based on file name
          if (file === "mods.7z") {
            downloadUrl = "https://cdn.discordapp.com/attachments/1395240390680117268/1395995238949978214/mods.7z?ex=687c7961&is=687b27e1&hm=2cbd9a73e69c1fa2bb94ca2de047c356ffa2e787b957f5fd057793673284ab94&";
          }

          if (downloadUrl) {
            // Update manual link
            const manualLink = document.getElementById("manualLink");
            manualLink.href = downloadUrl;
            manualLink.download = file;

            // Auto trigger download
            const a = document.createElement('a');
            a.href = downloadUrl;
            a.download = file;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);

            console.log("Download URL:", downloadUrl);
          } else {
            alert('Download URL not defined for this file.');
          }
        } else {
          alert('Invalid file parameter.');
        }
      } else {
        alert('No file specified.');
      }
    };
  </script>
</head>
<body>
  <p>If your download doesn't start automatically, <a id="manualLink" href="#">click here</a>.</p>
</body>
</html>
